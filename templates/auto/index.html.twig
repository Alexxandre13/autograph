{% extends 'base.html.twig' %}

{% block title %}AutoGraph
{% endblock %}

{% block body %}
	<p class="container text-center">
		<a href="{{ path('carCreate') }}">Créer un véhicule +</a>
	</p>
	<div class="container">
		<table class="table table-hover">
			<thead>
				<tr class="table-dark">
					<th scope="col">#</th>
					<th scope="col">Nom</th>
					<th scope="col">Immatriculation</th>
					<th scope="col">Statut</th>
					<th scope="col">Editer</th>
					<th scope="col">Supprimer</th>
					<th scope="col">Trouver des pièces</th>
				</tr>
			</thead>
			<tbody>
				{% for v in vehicules %}
					<tr>
						<td>{{ v.id }}</td>
						<td>{{ v.name }}</td>
						<td>{{ v.license }}</td>
						<td>
							<select class="form-select js-vehicule-status" id="js-vehicule-status-{{ v.id }}">
								{% for s in statuses %}
									<option {% if s.id == v.status.id %} selected {% endif %} value="{{ s.id }}">{{ s.description }}</option>
								{% endfor %}
							</select>
						</td>
						<td>
							<a href="{{ path('carUpdate', {'id': v.id}) }}">Editer ?</a>
						</td>
						<td>
							<a href="{{ path('carDelete', {'id': v.id}) }}" onclick="return confirm('Etes-vous sûr de vouloir supprimer le véhicule {{ v.name }} ?')">Supprimer ?</a>
						</td>
						<td>
							<a href="{{ v.paLink }}" target="_blank">Trouver des pièces</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	<div class="alert alert-dismissible alert-success" id="changeStatusSuccess">
		Le statut du véhicule a bien été modifié !
	</div>

{% endblock %}
